# Проект: TLS

## Описание

Проект имитации Transport Layer Security соединения (клиент/сервер приложение)

## Запуск

Проект создает 2 бинарных файла, которые лежат в bin/ директории с именами server и client
Для запуска необходимо передать ip адрес, например:

`./server 127.0.0.1`
`./client 127.0.0.1`

На данные момент происходит настройка TLS соединения и отправка тестового сообщения.


## Настройка окружения
В проект добавлен conan (packege manager C/C++)
Профайлы для сборок находятся в папке conanProfiles

### Windows
Разработка и тестовые запуски с помощью:
- Компилятор: msys2 gcc 14.0.0 (в профилях указан полный путь до gcc и g++)
- Cmake: 3.30.1
- Docker: 27.4.0
- Conan: устанавливался через установщик для Win (не через пакет python)

## Linux
Разработка и тестовые запуски с помощью:
- Компилятор: gcc и g++ 13.3.0\
- Cmake: 3.28.3
- Docker: 28.1.1
- Conan: устанавливался как пакет python -> может возникать ошибка, при которой cmake не может найти исполняемый файл (ошибка в find_program())
- - Fix error: "File > Settings > Build, Execution, Deployment > CMake", в поле "Environment" добавить путь до папки bin с python, например "PATH=/opt/venv/bin:$PATH"


## Описание
Реализация TLS соединения на C++ с поддержкой алгоритмов шифрования RSA и AES, а также архивацией данных.

## Стэк
- gcc, clang
- Boost
- zlib
- OpenSSL
- CMake
- Conan (опционально)
- Docker (опционально)
- GTest, Benchmark (опционально)

## Автоматизация

### Conan

Решение для зависимостей под разные ОС. В директории `conanProfiles` лежат профили под Linux и Windows

### Bash-скрипты

- `format_all_files.sh` (`devops/misc/format_all_files.sh`) - скрипт форматирование исходный файлов проекта. Основные расширения для проекта c/cpp/h/hpp.
- `clean_build_dirs.sh` - очистка локальных билд директорий
- `compile.sh` - скрипт для локальной сборки проекта
- - `-d` - запуск сборки с типом `Debug`
- - `-r` - запуск сборки с типом `Release`
- - `--no-conan` - сборка с использованием локальных зависимостей
- - `--with-tests` - дополнительная сборка тестов
- `compile_docker_local.sh` - сборка проекта в докере с помощью файла `docker/Dockerfile.build`. Скрипт, скачивает докер образ с зависимостями из github, копирует исходный код из текущей директории, запускает сборку и выкачивает артефакты в директорию `artifacts`
- `run_networking.sh` - запуск собранных артефактов внутри докер образа с помощью файла `docker/Dockerfile.run`. (Из-за зависимостей базовый образ gcc14_conan много весит, в качестве альтернативы используется образ ubuntu:noble)
- - `-s|--server` - запуск сервера
- - `-c|--client` - запуск клиента
- - `--ip` - передача ip-адреса
- `update_base_image.sh` - обновление базового образа с зависимостями. Авторизация на GitHub Container Registry с помощью token, сборка нового образа с помощью `docker/Dockerfiule.base`, формирование тэгов (sha + latest) и публикация на github

### Github Action

- `build_project.yml` - сборка проекта при push. Логика аналогична скрипту `compile_docker_local.sh`, собирает докер контейнер с помощью файла `docker/Dockerfile.build` и извлекает артефакты.
